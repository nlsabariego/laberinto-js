"use strict";let canvas,ctx;const FPS=50,text=document.querySelector(".main__text"),anchoF=50,altoF=50;let imgHouse,imgBone,imgDog,imgPolice,enemy=[];const grass="#166b2d",way="#d46b15",bones="#753f0d",myHome="#b1ff4a",noBone="#000000",maze=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,0,0,0,0,0,2,2,2,2,0,2,2,2,2,2,0,1,0],[0,2,0,2,2,2,0,2,0,0,2,0,0,0,2,0,2,0,2,0],[0,2,0,2,0,2,0,2,2,2,2,0,2,2,2,0,2,0,2,0],[0,2,2,2,0,2,2,2,0,0,0,0,2,0,0,0,2,2,2,0],[0,2,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0],[0,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,0,3,0],[0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,2,0],[0,2,2,2,0,2,2,2,0,2,2,2,0,2,2,2,0,2,2,0],[0,2,2,2,0,2,2,2,0,2,0,2,2,2,0,2,0,2,0,0],[0,2,0,2,2,2,0,2,2,2,0,2,2,2,0,2,2,2,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],House=function(t,i){this.x=t,this.y=i,this.draw=function(){ctx.drawImage(imgHouse,50*this.x,50*this.y)}},Bone=function(t,i){this.x=t,this.y=i,this.draw=function(){ctx.drawImage(imgBone,50*this.x,50*this.y)}},Police=function(t,i){this.x=t,this.y=i,this.direction=Math.floor(4*Math.random()),this.delay=50,this.fp=0,this.acc=0,this.draw=function(){ctx.drawImage(imgPolice,50*this.x,50*this.y)},this.margins=function(t,i){let e=!1;return 0===maze[i][t]&&(e=!0),e},this.move=function(){dog.crashEnemy(this.x,this.y),this.acc<this.delay?this.acc++:(this.acc=0,0===this.direction&&(!1===this.margins(this.x,this.y-1)?this.y--:this.direction=Math.floor(4*Math.random())),1===this.direction&&(!1===this.margins(this.x,this.y+1)?this.y++:this.direction=Math.floor(4*Math.random())),2===this.direction&&(!1===this.margins(this.x-1,this.y)?this.x--:this.direction=Math.floor(4*Math.random())),3===this.direction&&(!1===this.margins(this.x+1,this.y)?this.x++:this.direction=Math.floor(4*Math.random())))}},Protagonist=function(){this.x=1,this.y=1,this.bone=!1,this.draw=function(){ctx.drawImage(imgDog,50*this.x,50*this.y)},this.crashEnemy=function(t,i){this.x===t&&this.y===i&&this.dead()},this.margins=function(t,i){let e=!1;return 0===maze[i][t]&&(e=!0),e},this.up=function(){!1===this.margins(this.x,this.y-1)&&(this.y--,this.logicObjects())},this.down=function(){!1===this.margins(this.x,this.y+1)&&(this.y++,this.logicObjects())},this.left=function(){!1===this.margins(this.x-1,this.y)&&(this.x--,this.logicObjects())},this.right=function(){!1===this.margins(this.x+1,this.y)&&(this.x++,this.logicObjects())},this.win=function(){this.x=1,this.y=1,text.innerHTML="¡HAS GANADO!🎉",this.bone=!1,maze[6][18]=3},this.dead=function(){text.innerHTML="¡Te han pillado! Vuelve a intentarlo🐶",this.x=1,this.y=1,this.bone=!1,maze[6][18]=3},this.logicObjects=function(){let t=maze[this.y][this.x];3===t&&(this.bone=!0,maze[this.y][this.x]=4,text.innerHTML="¡Ya tienes el hueso! ¡Corre a casa!"),1===t&&(!0===this.bone?this.win():text.innerHTML="Aún no tienes el hueso, ¡búscalo!")}};function drawMaze(){let t;for(let i=0;i<maze.length;i++)for(let e=0;e<20;e++)0===maze[i][e]&&(t=grass),2===maze[i][e]&&(t=way),1===maze[i][e]&&(t=myHome),3===maze[i][e]&&(t=bones),4===maze[i][e]&&(t=noBone),ctx.fillStyle=t,ctx.fillRect(50*e,50*i,50,50)}let dog=new Protagonist;const home=new House(18,1),prize=new Bone(18,6);function initialize(){canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),imgHouse=new Image,imgHouse.src="./assets/images/house.png",imgBone=new Image,imgBone.src="./assets/images/bone.png",imgDog=new Image,imgDog.src="./assets/images/dog.png",imgPolice=new Image,imgPolice.src="./assets/images/police.png",enemy.push(new Police(9,5)),enemy.push(new Police(1,8)),enemy.push(new Police(10,1)),document.addEventListener("keydown",(function(t){38===t.keyCode&&dog.up(),40===t.keyCode&&dog.down(),37===t.keyCode&&dog.left(),39===t.keyCode&&dog.right()})),setInterval((function(){master()}),20)}function deleteCanvas(){canvas.width=1e3,canvas.height=600}function master(){deleteCanvas(),drawMaze(),home.draw(),prize.draw(),dog.draw();for(let t=0;t<enemy.length;t++)enemy[t].move(),enemy[t].draw()}